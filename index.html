```html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ’™ Valentineâ€™s Proposal</title>
  <style>
    :root{
      --bg1:#cfe8ff;
      --bg2:#1e6fd9;
      --card:#ffffffcc;
      --text:#0b1b2a;
      --accent:#ff3b7a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 15%, #e9f4ff, transparent 60%),
        radial-gradient(900px 600px at 90% 80%, #b9dcff, transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    .card{
      width:min(900px, 94vw);
      background:var(--card);
      border:1px solid #ffffff80;
      backdrop-filter: blur(10px);
      border-radius:24px;
      padding:40px 34px;
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
      position:relative;
      z-index:2;
    }

    h1{
      margin:0 0 18px;
      font-size: clamp(28px, 3.6vw, 44px);
      letter-spacing:-0.02em;
      text-align:center;
    }

    .bubble{
      margin:12px auto 0;
      width:min(720px, 100%);
      background:white;
      border-radius:18px;
      padding:18px 18px;
      border:1px solid rgba(0,0,0,.06);
      box-shadow: 0 10px 20px rgba(0,0,0,.08);
      text-align:center;
      font-size: clamp(16px, 2.2vw, 20px);
      line-height:1.35;
      min-height: 84px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      gap:10px;
    }

    /* secret reveal button (visible after 5 NOs) */
    .secret-btn{
      display:none;
      font-size:14px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.08);
      background:#ffffff;
      color:var(--text);
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      cursor:pointer;
      font-weight:800;
    }
    .secret-btn:hover{ transform: translateY(-1px); }

    .secret-msg{
      display:none;
      font-size:14px;
      opacity:.9;
      padding-top:2px;
    }

    .controls{
      margin-top:22px;
      display:flex;
      justify-content:center;
      gap:16px;
      flex-wrap:wrap;
      position:relative;
      min-height:140px;
    }

    button{
      border:0;
      padding:16px 22px;
      border-radius:999px;
      font-weight:800;
      font-size:18px;
      cursor:pointer;
      transition: transform .12s ease;
      user-select:none;
      touch-action: manipulation;
      will-change: transform, left, top;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(135deg, var(--accent), #ff8fb3);
      color:white;
      box-shadow: 0 14px 30px rgba(255,59,122,.35);
      position:relative;
      z-index:2;
    }

    .no{
      background: linear-gradient(135deg, #2d3436, #636e72);
      color:white;
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
      position:absolute;
      left:50%;
      top:0;
      transform-origin:center;
      z-index:1;
    }

    .result{
      margin-top:18px;
      display:none;
      text-align:center;
      padding:16px 18px;
      border-radius:18px;
      background: linear-gradient(135deg, #fff, #e6f3ff);
      border:1px solid rgba(0,0,0,.06);
    }
    .result p{ margin:0; font-size: 18px; line-height:1.35; }

    /* Date plan menu */
    .plan{
      margin-top:14px;
      display:none;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .plan button{
      font-size:16px;
      padding:12px 16px;
      font-weight:800;
      box-shadow: 0 10px 22px rgba(0,0,0,.12);
      background: #ffffff;
      color: var(--text);
      border: 1px solid rgba(0,0,0,.06);
    }
    .plan button:hover{ transform: translateY(-1px); }

    canvas{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1;
    }

    .heart{
      display:inline-block;
      animation: pulse 1.1s infinite ease-in-out;
      transform-origin:center;
    }
    @keyframes pulse{
      0%,100%{transform:scale(1)}
      50%{transform:scale(1.14)}
    }

    .shake{ animation: shake .35s linear; }
    @keyframes shake{
      0%{transform:translateX(0)}
      25%{transform:translateX(-6px)}
      50%{transform:translateX(6px)}
      75%{transform:translateX(-4px)}
      100%{transform:translateX(0)}
    }
  </style>
</head>
<body>
  <canvas id="petals"></canvas>

  <div class="card">
    <h1>
      Hey <span id="theirName">Kadhal</span> <span class="heart">ğŸ’™</span>
    </h1>

    <div class="bubble">
      <div id="line">Hello Kadhal ğŸ‘€â¤ï¸</div>

      <!-- visible button after 5 NO tries -->
      <button type="button" class="secret-btn" id="secretBtn">Click here</button>
      <div class="secret-msg" id="secretMsg">I just wanted you to say yes because I love you d punda</div>
    </div>

    <div class="controls" id="arena">
      <button class="yes" id="yesBtn">YES ğŸ˜</button>
      <button class="no" id="noBtn">No ğŸ™ƒ</button>
    </div>

    <div class="result" id="result">
      <p id="finalMsg"></p>

      <div class="plan" id="planMenu">
        <button type="button" data-plan="food">ğŸ• Food date</button>
        <button type="button" data-plan="movie">ğŸ¬ Movie + cuddles</button>
        <button type="button" data-plan="ice">ğŸ¦ Ice cream + walk</button>
      </div>

      <p id="planMsg" style="margin-top:10px; display:none; font-size:16px; opacity:.9;"></p>
    </div>
  </div>

  <script>
    // Optional: allow ?to=Kadhal
    const params = new URLSearchParams(location.search);
    const to = params.get("to") || "Kadhal";
    document.getElementById("theirName").textContent = to;

    const lines = [
      "Hello Kadhal ğŸ‘€â¤ï¸",
      "Happy almost 7 months ğŸ’•",
      "Valentine's coming ğŸ‘€",
      "I am planning to ask someone...",
      "omfg thats you ğŸ˜Œ",
      "im planning to ask you",
      "so, will you be my valentine? ğŸ’˜",
      "Lol that was a rhetorical question",
      "try hitting no if you can ğŸ˜",
      "love you moon pie ğŸŒ™ğŸ¥§",
      "lalalalalalalalalalalalalalalalalalalalalalala",
      "if your seeing this youve been trying to hit no for so long, so stfu and hit yes ğŸ’–"
    ];

    const noTalk = ["No ğŸ™ƒ", "No?? ğŸ˜³", "Stop ğŸ˜­", "pls", "ok fine ğŸ˜”"];

    const lineEl = document.getElementById("line");
    const secretBtn = document.getElementById("secretBtn");
    const secretMsg = document.getElementById("secretMsg");

    let lineIndex = 0;
    let noAttempts = 0;

    function nextLine() {
      if (lineIndex < lines.length - 1) lineIndex++;
      lineEl.textContent = lines[lineIndex];
      lineEl.classList.remove("shake");
      void lineEl.offsetWidth;
      lineEl.classList.add("shake");
    }

    const arena = document.getElementById("arena");
    const noBtn = document.getElementById("noBtn");

    let noScale = 1.9;
    const shrinkFactor = 0.84;
    const minScale = 0.18;
    const baseTranslateX = 160;

    function setNoTransform() {
      noBtn.style.transform = `translateX(${baseTranslateX}px) scale(${noScale})`;
    }

    function updateNoTalk() {
      const idx = Math.min(noTalk.length - 1, noAttempts);
      noBtn.textContent = noTalk[idx];
    }

    function maybeShowSecret() {
      if (noAttempts >= 5) secretBtn.style.display = "inline-flex";
    }

    function moveAndShrinkNo() {
      noAttempts++;

      nextLine();
      updateNoTalk();
      maybeShowSecret();

      const rect = arena.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const maxX = rect.width - btnRect.width;
      const maxY = rect.height - btnRect.height;

      const x = Math.max(0, Math.min(maxX, Math.random() * maxX));
      const y = Math.max(0, Math.min(maxY, Math.random() * maxY));

      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";

      noScale = Math.max(minScale, noScale * shrinkFactor);
      setNoTransform();
    }

    noBtn.addEventListener("mouseenter", moveAndShrinkNo);
    noBtn.addEventListener("click", (e) => { e.preventDefault(); moveAndShrinkNo(); });
    noBtn.addEventListener("touchstart", (e) => { e.preventDefault(); moveAndShrinkNo(); }, { passive:false });

    requestAnimationFrame(() => {
      noBtn.style.left = "60%";
      noBtn.style.top = "0px";
      setNoTransform();
      updateNoTalk();
    });

    // Secret reveal button
    secretBtn.addEventListener("click", () => {
      secretMsg.style.display = "block";
      secretBtn.style.display = "none";
    });

    // YES button message + petal rain + date plan menu
    const yesBtn = document.getElementById("yesBtn");
    const result = document.getElementById("result");
    const finalMsg = document.getElementById("finalMsg");
    const planMenu = document.getElementById("planMenu");
    const planMsg = document.getElementById("planMsg");

    yesBtn.addEventListener("click", () => {
      result.style.display = "block";
      finalMsg.textContent =
        `Hi ${to} , happy Kadhalar Dinam (thats valentines day btw) (since your vadaki) Love you Mwhaaaaa`;

      planMenu.style.display = "flex";
      startPetalRain();

      noBtn.style.pointerEvents = "none";
      noBtn.style.opacity = "0.55";
    });

    planMenu.addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-plan]");
      if (!btn) return;

      const plan = btn.getAttribute("data-plan");
      const text = {
        food: "Locked in. You're mine. ğŸ•ğŸ’™",
        movie: "Locked in. You're mine. ğŸ¬ğŸ«¶",
        ice:  "Locked in. You're mine. ğŸ¦ğŸš¶â€â™€ï¸"
      }[plan] || "Locked in. You're mine. ğŸ’™";

      planMsg.style.display = "block";
      planMsg.textContent = text;

      startPetalRain(3500);
    });

    // ğŸŒ¸ Petal rain from the TOP
    const canvas = document.getElementById("petals");
    const ctx = canvas.getContext("2d");
    let W, H, DPR;

    function resize() {
      DPR = window.devicePixelRatio || 1;
      W = canvas.width = Math.floor(window.innerWidth * DPR);
      H = canvas.height = Math.floor(window.innerHeight * DPR);
    }
    window.addEventListener("resize", resize);
    resize();

    function rand(min, max){ return Math.random() * (max - min) + min; }

    let petals = [];
    let spawnUntil = 0;
    let ticking = false;

    function spawnPetal() {
      const glyphs = ["ğŸŒ¸", "ğŸ’®", "ğŸŒº", "ğŸŒ·", "ğŸŒ¹"];
      const g = glyphs[Math.floor(Math.random() * glyphs.length)];

      petals.push({
        x: rand(0, W),
        y: rand(-140 * DPR, -20 * DPR),
        vx: rand(-0.8, 0.8) * DPR,
        vy: rand(2.0, 4.8) * DPR,
        drift: rand(0.008, 0.022),
        phase: rand(0, Math.PI * 2),
        rot: rand(0, Math.PI * 2),
        vrot: rand(-0.06, 0.06),
        size: rand(20, 42) * DPR,
        a: 1,
        glyph: g
      });
    }

    function startPetalRain(durationMs = 6000) {
      spawnUntil = Math.max(spawnUntil, performance.now() + durationMs);

      for (let i=0; i<30; i++) spawnPetal();

      if (!ticking) requestAnimationFrame(tickPetals);
    }

    function tickPetals(t) {
      if (ticking) return;
      ticking = true;

      (function loop(now){
        ctx.clearRect(0, 0, W, H);

        if (now < spawnUntil) {
          for (let i=0; i<3; i++) spawnPetal();
        }

        for (const p of petals) {
          p.phase += p.drift * 60;
          p.x += p.vx + Math.sin(p.phase) * (0.9 * DPR);
          p.y += p.vy;
          p.rot += p.vrot;

          if (p.y > H * 0.85) p.a -= 0.01;

          ctx.save();
          ctx.globalAlpha = Math.max(0, p.a);
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.font = `${p.size}px "Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji",system-ui`;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillText(p.glyph, 0, 0);
          ctx.restore();
        }

        petals = petals.filter(p => p.a > 0 && p.y < H + 160 * DPR);

        if (now < spawnUntil || petals.length) {
          requestAnimationFrame(loop);
        } else {
          ticking = false;
          ctx.clearRect(0, 0, W, H);
        }
      })(t);
    }
  </script>
</body>
</html>
```
